<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MVVM | Makerspace</title>
    <meta name="description" content="A resource/code reference for Makerspace Students">
    
    
    <link rel="preload" href="/makerspace/assets/css/0.styles.540581a7.css" as="style"><link rel="preload" href="/makerspace/assets/js/app.debd2f8d.js" as="script"><link rel="preload" href="/makerspace/assets/js/2.bea4a480.js" as="script"><link rel="preload" href="/makerspace/assets/js/11.41049e84.js" as="script"><link rel="prefetch" href="/makerspace/assets/js/10.699443e1.js"><link rel="prefetch" href="/makerspace/assets/js/12.671333a8.js"><link rel="prefetch" href="/makerspace/assets/js/13.6ba2dbe7.js"><link rel="prefetch" href="/makerspace/assets/js/14.a50c9fc8.js"><link rel="prefetch" href="/makerspace/assets/js/15.d6f48d3b.js"><link rel="prefetch" href="/makerspace/assets/js/16.ae199350.js"><link rel="prefetch" href="/makerspace/assets/js/17.6ca45d62.js"><link rel="prefetch" href="/makerspace/assets/js/18.c9dfb02d.js"><link rel="prefetch" href="/makerspace/assets/js/19.2a604709.js"><link rel="prefetch" href="/makerspace/assets/js/20.d4b160a3.js"><link rel="prefetch" href="/makerspace/assets/js/21.13c1f42e.js"><link rel="prefetch" href="/makerspace/assets/js/22.0fce7d9c.js"><link rel="prefetch" href="/makerspace/assets/js/23.13bcb06d.js"><link rel="prefetch" href="/makerspace/assets/js/24.bc10ba95.js"><link rel="prefetch" href="/makerspace/assets/js/25.e21cbaf1.js"><link rel="prefetch" href="/makerspace/assets/js/26.cf6f72b5.js"><link rel="prefetch" href="/makerspace/assets/js/3.1398b66e.js"><link rel="prefetch" href="/makerspace/assets/js/4.323a5bf8.js"><link rel="prefetch" href="/makerspace/assets/js/5.367d6021.js"><link rel="prefetch" href="/makerspace/assets/js/6.53284d11.js"><link rel="prefetch" href="/makerspace/assets/js/7.230cb609.js"><link rel="prefetch" href="/makerspace/assets/js/8.b0d3b231.js"><link rel="prefetch" href="/makerspace/assets/js/9.bf962eeb.js">
    <link rel="stylesheet" href="/makerspace/assets/css/0.styles.540581a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/makerspace/" class="home-link router-link-active"><!----> <span class="site-name">Makerspace</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/makerspace/" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/makerspace/programming-101/" class="sidebar-heading clickable"><span>Programming 101</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/makerspace/game-dev-resources/" class="sidebar-heading clickable"><span>Game Dev Resources</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/makerspace/kotlin/" class="sidebar-heading clickable"><span>Kotlin</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/makerspace/android/" class="sidebar-heading clickable router-link-active open"><span>Android</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/makerspace/android/weather/" class="sidebar-heading clickable router-link-active open"><span>Weather App</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/makerspace/android/weather/" class="sidebar-link">Android Weather App</a></li><li><a href="/makerspace/android/weather/start/" class="sidebar-link">Creating a new project</a></li><li><a href="/makerspace/android/weather/mvvm/" class="active sidebar-link">MVVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/makerspace/android/weather/mvvm/#model" class="sidebar-link">Model</a></li><li class="sidebar-sub-header"><a href="/makerspace/android/weather/mvvm/#view" class="sidebar-link">View</a></li><li class="sidebar-sub-header"><a href="/makerspace/android/weather/mvvm/#viewmodel" class="sidebar-link">ViewModel</a></li><li class="sidebar-sub-header"><a href="/makerspace/android/weather/mvvm/#livedata" class="sidebar-link">LiveData</a></li><li class="sidebar-sub-header"><a href="/makerspace/android/weather/mvvm/#updating-livedata" class="sidebar-link">Updating LiveData</a></li></ul></li><li><a href="/makerspace/android/weather/location/" class="sidebar-link">Getting the devices location</a></li><li><a href="/makerspace/android/weather/git/" class="sidebar-link">Git Integration</a></li><li><a href="/makerspace/android/weather/forecast/" class="sidebar-link">Getting the forecast</a></li><li><a href="/makerspace/android/weather/more-views/" class="sidebar-link">Adding More Data</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mvvm"><a href="#mvvm" aria-hidden="true" class="header-anchor">#</a> MVVM</h1> <p>Short for Model View ViewModel, the MVVM pattern is the default for modern Android applications. It describes the relationship and transfer of data within the application.</p> <h2 id="model"><a href="#model" aria-hidden="true" class="header-anchor">#</a> Model</h2> <p>The first M in MVVM, the model describes the raw data that your application needs, and also how to access it. Data from a SQL database, or an external server are examples of model data.</p> <p>The model code serves as a source for the all the data in the application (with exception to sensor data, or data created by the view itself).</p> <p>In our app, the model will be forecast data. Eventually we will be pulling this data from the internet, but for now will just mock it up.</p> <p>Right click the folder containing <code>MainActivity</code> and select <code>New | Kotlin File/Class</code>. Name it <code>WeatherModel</code>, leaving the options as default. That should create a new file next to <code>MainActivity</code> called <code>WeatherModel.kt</code>. It's contents should look like this.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

</code></pre></div><p>Now we are going to create a <a href="https://kotlinlang.org/docs/reference/data-classes.html" target="_blank" rel="noopener noreferrer">data class<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> called <code>WeatherModel</code> (the same name as the file).</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">WeatherModel</span><span class="token punctuation">(</span>
    <span class="token keyword">val</span> temperature<span class="token operator">:</span> Double
<span class="token punctuation">)</span>
</code></pre></div><p>We only have one field in this class: <code>temperature</code>. We'll add more later when we start pulling data from the internet. For now this is all we need.</p> <h2 id="view"><a href="#view" aria-hidden="true" class="header-anchor">#</a> View</h2> <p>The 2nd letter in MVVM, the view is all the code that deals with the visual aspect of the application. In other words, what the user &quot;views&quot;. Activities (such as <code>MainActivity</code>), and layouts are part of the view code.</p> <p>We've already messed with view code when we set the <code>text</code> of <code>temperatureText</code> in <code>onCreate</code>.</p> <h2 id="viewmodel"><a href="#viewmodel" aria-hidden="true" class="header-anchor">#</a> ViewModel</h2> <p>The view model is the last 2 letters of MVVM. It's responsible for requesting data from the model, and providing it to the view.</p> <p>Let's create a new file called <code>WeatherViewModel</code> in the same way you created <code>WeatherModel</code>. In the file you just created, create a class called <code>WeatherViewModel</code> that will inherit from <code>ViewModel</code>.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> WeatherViewModel<span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can create our <code>WeatherViewModel</code> in the <code>onCreate</code> of <code>MainActivity</code> using the <code>ViewModels()</code> delegate function.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token comment">// NEW!</span>
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>activity<span class="token punctuation">.</span>viewModels
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        <span class="token comment">// NEW!</span>
        <span class="token keyword">val</span> viewModel<span class="token operator">:</span> WeatherViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        temperatureText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;81° F&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="note"><p>The <code>by</code> keyword tells kotlin to delegate the creation of <code>viewModel</code> to <code>viewModels()</code>. Basically <code>viewModels()</code> is resposible for providing <code>viewModel</code> with all the resources it needs to function properly.</p></div> <p>In order to use <code>viewModels()</code>, will need to include it in our project. Open up your <code>build.gradle (Module: app)</code>, and in the <code>dependencies</code> your going to add a new dependency below all the other dependencies.</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    implementation <span class="token string gstring">&quot;androidx.activity:activity-ktx:1.1.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You might have an error after doing this. The lowest Java version that our Android project supports is 1.6. The <code>viewModels()</code> function can only be used on 1.8 and above. We can fix this by adding some code to the <code>android</code> block in <code>build.gradle</code>.</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>android <span class="token punctuation">{</span>
    compileSdkVersion <span class="token number">28</span>

    compileOptions <span class="token punctuation">{</span>
        sourceCompatibility JavaVersion<span class="token operator">.</span>VERSION_1_8
        targetCompatibility JavaVersion<span class="token operator">.</span>VERSION_1_8
    <span class="token punctuation">}</span>

    kotlinOptions <span class="token punctuation">{</span>
        jvmTarget <span class="token operator">=</span> JavaVersion<span class="token operator">.</span>VERSION_1_8<span class="token operator">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Right now our <code>WeatherViewModel</code> doesn't do anything. We're going to fix that by using <code>LiveData</code>.</p> <h2 id="livedata"><a href="#livedata" aria-hidden="true" class="header-anchor">#</a> LiveData</h2> <p>The <a href="https://developer.android.com/topic/libraries/architecture/livedata" target="_blank" rel="noopener noreferrer">LiveData<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> class is the lynchpin of the MVVM pattern. View code can <code>observe()</code> a <code>LiveData</code> object, and whenever the <code>LiveData</code> changes, the view will be updated.</p> <p>Create a function called <code>getForecast()</code> in <code>WeatherViewModel</code> that returns a <code>LiveData</code> object with an inner type of our <code>WeatherModel</code>.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>LiveData <span class="token comment">// NEW!</span>
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> WeatherViewModel<span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// NEW!</span>
    <span class="token keyword">fun</span> <span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> LiveData<span class="token operator">&lt;</span>WeatherModel<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Inside of <code>getForecast()</code>, create a <code>val</code> called <code>result</code> and set it <code>=</code> to a new <code>MutableLiveData</code> object with the inner type of <code>WeatherModel</code>. Then return that <code>result</code>.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>LiveData
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>MutableLiveData
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> WeatherViewModel<span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> LiveData<span class="token operator">&lt;</span>WeatherModel<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// NEW!</span>
        <span class="token keyword">val</span> result <span class="token operator">=</span> MutableLiveData<span class="token operator">&lt;</span>WeatherModel<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>MutableLiveData</code> class inherits <code>LiveData</code>, so we can return it from <code>getForecast()</code> with no issue.</p> <p>Now we're going to <code>observe()</code> our <code>LiveData</code> that we get from <code>getForecast()</code> inside of <code>MainActivity</code>.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>activity<span class="token punctuation">.</span>viewModels
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>Observer <span class="token comment">// NEW!</span>
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        <span class="token keyword">val</span> viewModel<span class="token operator">:</span> WeatherViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// NEW!</span>
        viewModel<span class="token punctuation">.</span><span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Observer <span class="token punctuation">{</span>
            
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

        temperatureText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;81° F&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>observe()</code> method takes 2 parameters.</p> <ol><li>The <code>LifeCycleOwner</code> of the <code>LiveData</code>. Our <code>MainActivity</code> extends <code>LifeCycleOwner</code>, so we can use the <code>this</code> keyword to pass it in.</li> <li>An <code>Observer</code>. This is an object that will be called when the <code>LiveData</code> gets updated. We create an <code>Observer</code> with the code</li></ol> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code>Observer <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Any code between the curly braces will be executed when the <code>LiveData</code> updates.</p> <p>We want to update our <code>temperatureText</code> when we get new forecast data. Let's move it into the <code>Observer {}</code> block.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// ...</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>

        <span class="token keyword">val</span> viewModel<span class="token operator">:</span> WeatherViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        viewModel<span class="token punctuation">.</span><span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Observer <span class="token punctuation">{</span>
                temperatureText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;81° F&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="updating-livedata"><a href="#updating-livedata" aria-hidden="true" class="header-anchor">#</a> Updating LiveData</h2> <p>If we were to run our app now, we wouldn't see anything. That's because we're creating our <code>LiveData</code> <code>result</code> in <code>getForecast()</code>, but we aren't doing anything with it. Let's change that.</p> <p>Update <code>getForecast()</code> to set the <code>value</code> on <code>result</code> before we return <code>result</code>.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// ...</span>

<span class="token keyword">class</span> WeatherViewModel<span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> LiveData<span class="token operator">&lt;</span>WeatherModel<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> result <span class="token operator">=</span> MutableLiveData<span class="token operator">&lt;</span>WeatherModel<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        result<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">WeatherModel</span><span class="token punctuation">(</span><span class="token number">82.0</span><span class="token punctuation">)</span> <span class="token comment">// NEW!</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We now need to update our <code>Observer</code> to use the value from the <code>LiveData</code>.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">// In onCreate</span>
viewModel<span class="token punctuation">.</span><span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Observer <span class="token punctuation">{</span>
        temperatureText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>it<span class="token punctuation">.</span>temperature<span class="token delimiter variable">}</span></span>° F&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>The <code>it</code> keyword is the value from the <code>LiveData</code> we are observing. The <code>Observer</code> is using a <a href="https://kotlinlang.org/docs/reference/lambdas.html" target="_blank" rel="noopener noreferrer">lambda<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which is why we have access to <code>it</code>. If we wanted to use a name other than it we could do</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token comment">//         vvvvvvvvvvv</span>
Observer <span class="token punctuation">{</span> forecast <span class="token operator">-&gt;</span>
    temperatureText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>forecast<span class="token punctuation">.</span>temperature<span class="token delimiter variable">}</span></span>° F&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It's up to preference, but for sake of clarity I'm going to use <code>forecast</code> instead of <code>it</code>.</p> <p>The code up to this point should look something like the following.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>weatherapp

<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>activity<span class="token punctuation">.</span>viewModels
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>Observer
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        <span class="token keyword">val</span> viewModel<span class="token operator">:</span> WeatherViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        viewModel<span class="token punctuation">.</span><span class="token function">getForecast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Observer <span class="token punctuation">{</span> forecast <span class="token operator">-&gt;</span>
                temperatureText<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>forecast<span class="token punctuation">.</span>temperature<span class="token delimiter variable">}</span></span>° F&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You should have something like the following on your device.</p> <p><img src="/makerspace/assets/img/screenshot-final.cb5cf1e2.png" alt=""></p> <p>Next time we'll discuss getting the devices physical location which we will eventually use to get the actually forecast.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/makerspace/android/weather/start/" class="prev">Creating a new project</a></span> <span class="next"><a href="/makerspace/android/weather/location/">Getting the devices location</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/makerspace/assets/js/app.debd2f8d.js" defer></script><script src="/makerspace/assets/js/2.bea4a480.js" defer></script><script src="/makerspace/assets/js/11.41049e84.js" defer></script>
  </body>
</html>
